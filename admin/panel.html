<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Panel â€“ Next Quest Studios</title>
  <link rel="stylesheet" href="/admin/css/admin.css" />
  <script type="module" src="/public/shared/firebaseConfig.js"></script>
</head>
<body>
  <div class="admin-panel">
    <h1>Welcome to the Admin Panel</h1>
    <p id="roleInfo"></p>

    <div class="tool-list" id="toolList">
      <!-- Tools are injected based on role -->
    </div>
  </div>

  <script type="module">
    const role = localStorage.getItem("userRole");
    const email = localStorage.getItem("userEmail");

    const toolList = document.getElementById("toolList");
    const roleInfo = document.getElementById("roleInfo");

    if (!role) {
      alert("Access denied: You are not logged in.");
      window.location.href = "/login.html";
    }

    roleInfo.textContent = `Logged in as: ${email} (${role})`;

    const toolsByRole = {
      owner: ["Sprite Editor", "Item Generator", "NPC Creator", "User Manager", "Project Manager"],
      co_owner: ["Sprite Editor", "Item Generator", "NPC Creator", "User Manager"],
      admin: ["Sprite Editor", "Item Generator", "NPC Creator"],
      sprite_editor: ["Sprite Editor", "Item Generator"],
      map_editor: [],
      moderator: ["User Manager"]
    };

    const allTools = {
      "Sprite Editor": "/admin/tools/sprite-editor.html",
      "Item Generator": "/admin/tools/item-generator.html",
      "NPC Creator": "/admin/tools/npc-creator.html",
      "User Manager": "/admin/tools/user-manager.html",
      "Project Manager": "/admin/tools/project-manager.html"
    };

    const allowedTools = toolsByRole[role] || [];

    allowedTools.forEach(tool => {
      const link = document.createElement("a");
      link.href = allTools[tool];
      link.textContent = tool;
      link.classList.add("tool-link");
      toolList.appendChild(link);
    });
  </script>
</body>
</html>